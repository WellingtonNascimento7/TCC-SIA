<!DOCTYPE html>
<html>
    <%- include ('partials/header.ejs') %>
<body>
    <div class="container w-100 p-3" >
        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" align="center">
            <div class="card col-xs-12 col-sm-12 col-md-12 col-lg-12" align="center">
                <br>
                <div class="card-title">
                    <h1>Cadastro de Estabelecimento</h1>
                    <br>
                </div>
                <div class="card-body">
                    <label>Nome:</label>
                    <input type="text" name="nome" id="nome" placeholder="Nome do estabelecimento" class="form-control">
                    <br>                    
                    <label>CEP:</label>
                    <input type="number" name="cep" id="cep" placeholder="0800-000" class="form-control">
                    <br>
                    <label>Estado:</label>
                    <input type="text" name="cidade" id="cidade" placeholder="SP" class="form-control">
                    <br>
                    <label>Cidade:</label>
                    <input type="text" name="estado" id="estado" placeholder="São Paulo" class="form-control">
                    <br>
                    <label>Bairro:</label>
                    <input type="text" name="bairro" id="bairro" placeholder="Itaquera" class="form-control">
                    <br>
                    <label>Logradouro:</label>
                    <input type="text" name="logradouro" id="logradouro" placeholder="Av. Brasil" class="form-control">
                    <br>
                    <label>Número:</label>
                    <input type="text" name="numero" id="numero" placeholder="2345" class="form-control">
                    <br>
                    <label>Complemento:</label>
                    <input type="text" name="complemento" id="complemento" placeholder="" class="form-control">
                    <br>                    
                    <label>Latitude:</label>
                    <input type="text" name="latitude" id="latitude" placeholder="-23.594094" class="form-control">
                    <br>
                    <label>Longitude:</label>
                    <input type="text" name="longitude" id="longitude" placeholder="-46.407166" class="form-control">
                    <br>
                    <br><br>
                    <button type="button" class="btn btn-lg btn-primary col-lg-6 col-md-6 col-sm-6 col-xs-6" onclick="criarUsuario()">Cadastrar</button>
                    <br><br>
                    <a href="/"><h5>Voltar</h5></a>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    function criarUsuario(){

        var nomeInput = $("#nome"); 
        var nascimentoInput = $("#nascimento");
        var telefoneInput = $("#telefone");
        var emailInput = $("#email");
        var senhaInput = $("#senha");
        var confSenha = $("#confSenha");

        var usuario = {
            nome: nomeInput.val(),
            nascimento: nascimentoInput.val(),
            telefone: telefoneInput.val(),
            email: emailInput.val(),
            senha: senhaInput.val()
        }        

        axios.post("http://localhost:8081/user/usuario",usuario).then(response => {
            if(response.status == 200){
                alert("Usuário cadastrado!");
                window.location.href = "/";
            }                
            
        }).catch(error => {
            alert(error)
            console.log(error);
        });

    }
</script>
</html>