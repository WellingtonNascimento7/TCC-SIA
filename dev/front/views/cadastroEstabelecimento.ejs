<!DOCTYPE html>
<html>
    <%- include ('partials/header.ejs') %>
<body>
    <div class="container w-100 p-3" >
        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" align="center">
            <div class="card col-xs-12 col-sm-12 col-md-12 col-lg-12" align="center">
                <br>
                <div class="card-title">
                    <h1>Cadastro de Estabelecimento</h1>
                    <br>
                </div>
                <div class="card-body">
                    <label>Nome:</label>
                    <input type="text" name="nome" id="nome" placeholder="Nome do estabelecimento" class="form-control">
                    <br>                    
                    <label>CEP:</label>
                    <input type="number" name="cep" id="cep" placeholder="0800-000" class="form-control">
                    <br>
                    <label>Estado:</label>
                    <input type="text" name="cidade" id="cidade" placeholder="SP" class="form-control">
                    <br>
                    <label>Cidade:</label>
                    <input type="text" name="estado" id="estado" placeholder="São Paulo" class="form-control">
                    <br>
                    <label>Bairro:</label>
                    <input type="text" name="bairro" id="bairro" placeholder="Itaquera" class="form-control">
                    <br>
                    <label>Logradouro:</label>
                    <input type="text" name="logradouro" id="logradouro" placeholder="Av. Brasil" class="form-control">
                    <br>
                    <label>Número:</label>
                    <input type="text" name="numero" id="numero" placeholder="2345" class="form-control">
                    <br>
                    <label>Complemento:</label>
                    <input type="text" name="complemento" id="complemento" placeholder="" class="form-control">
                    <br>                    
                    <label>Latitude:</label>
                    <input type="text" name="latitude" id="latitude" placeholder="-23.594094" class="form-control">
                    <br>
                    <label>Longitude:</label>
                    <input type="text" name="longitude" id="longitude" placeholder="-46.407166" class="form-control">
                    <br>
                    <label>Horário de Funcionamento:</label>
                    <input type="text" name="horario" id="horario" placeholder="09:00 - 22:00" class="form-control">
                    <br>
                    <br><br>
                    <button type="button" class="btn btn-lg btn-primary col-lg-6 col-md-6 col-sm-6 col-xs-6" onclick="criarEstabelecimento()">Cadastrar</button>
                    <br><br>
                    <a href="/"><h5>Voltar</h5></a>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    function criarEstabelecimento(){

        var nomeInput = $("#nome"); 
        var cepInput = $("#cep");
        var cidadeInput = $("#cidade");
        var estadoInput = $("#estado");
        var bairroInput = $("#bairro");
        var logradouroInput = $("#logradouro");
        var numeroInput = $("#numero");
        var complementoInput = $("#complemento");
        var latitudeInput = $("#latitude");
        var longitudeInput = $("#longitude");
        var horarioInput = $("#horario");
        
        var estabelecimento = {
            nome: nomeInput.val(),
            horariofunc: horarioInput.val(),
            cep: cepInput.val(),
            logradouro: logradouroInput.val(),
            numero: numeroInput.val(),
            bairro: bairroInput.val(), 
            estado: estadoInput.val(),
            cidade: cidadeInput.val(),
            complemento: complementoInput.val(),
            lng: longitudeInput.val(),
            lat: latitudeInput.val()
        }

        axios.post("http://localhost:8081/e/estab",estabelecimento).then(response => {
            if(response.status == 200){
                console.log(estabelecimento)
                alert("Estabelecimento cadastrado!");
                window.location.href = "/cadastroEstabelecimento";
            }                
            
        }).catch(error => {
            console.log(error);
        });

    }
</script>
</html>